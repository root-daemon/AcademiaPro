---
interface Props {
  timetable: object;
}
var time_table_arr = [null, null, null, null, null, null, null, null];
const { timetable }: { timetable: Record<string, any> } = Astro.props;

var used_times: string[] = [];
var starting_times: string[] = [];
var end_times: string[] = [];
const starting_times_slot = [
  "08:00",
  "08:50",
  "09:45",
  "10:40",
  "11:35",
  "12:30",
  "13:25",
  "14:20",
  "15:10",
  "16:00",
];
const ending_times_slot = [
  "08:50",
  "09:40",
  "10:35",
  "11:30",
  "12:25",
  "13:20",
  "14:15",
  "15:10",
  "16:00",
  "16:50",
];
Object.keys(timetable).forEach((key) => used_times.push(key));
used_times.pop();
for (var i = 0; i < used_times.length; i++) {
  starting_times.push(used_times[i].slice(0, 4 + 1));
  end_times.push(used_times[i].slice(used_times.length - 7));
}
starting_times.map(function (time, index) {
  if (
    ending_times_slot[starting_times_slot.indexOf(time)] == end_times[index]
  ) {
    time_table_arr[starting_times_slot.indexOf(time)] =
      timetable[used_times[index]];
  } else {
    var app = 0;
    var flag = false;
    while (!flag) {
      if (
        ending_times_slot[starting_times_slot.indexOf(time) + app] ==
        end_times[index]
      ) {
        flag = true;
        time_table_arr[starting_times_slot.indexOf(time) + app] =
          timetable[used_times[index]];
      } else {
        time_table_arr[starting_times_slot.indexOf(time) + app] =
          timetable[used_times[index]];
        app += 1;
      }
    }
  }
});
---

<tr class="tr">
{
  time_table_arr.map((element, index) =>
    element ? (
      <td id={String(element).includes("Theory") ? "theory" : "lab"}>
        {String(element).split("(")[0]}
      </td>
    ) : (
      <td />
    )
  )
}
</tr>

<style>
  
  #theory {
    background: var(--theory);
  }

  #practical {
    background: var(--practical);
  }

  #theory, #practical {
    color: #0a0d12;
    font-weight: 700;
    max-width: 2vw;
    font-size: 12px;
    text-align: left;
  }
  .tr {
    border: 0px none;
  }
  .tr td:first-child {
    border-radius: 12px 0 0 12px;
  }

  .tr td:last-child {
    border-radius: 0 12px 12px 0;
  }
</style>
